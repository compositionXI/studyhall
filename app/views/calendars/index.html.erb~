<div id='calendar'></div>

<script type="text/javascript">
$(document).ready(function() {
	
$('#calendar').fullCalendar({
  editable: true,
  disableResizing: true,
  eventDrop: function(event,dayDelta,minuteDelta,allDay,revertFunc) {
    newEvent = event.start;
    eventDate = newEvent.toDateString();
    eventHour = newEvent.getHours();
    amPm = ' am';
    if(eventHour == 0){ eventHour += 12; }
    if(eventHour == 12){ amPm = ' pm'; }
    if(eventHour >= 13){ eventHour -= 12; amPm = ' pm'; }
    eventMinuteInt = newEvent.getMinutes();
    if(eventMinuteInt < 10){ eventMinute = "0" + eventMinuteInt; }else{ eventMinute = eventMinuteInt; }
    eventTime = eventHour + ':' + eventMinute + amPm;
    if (confirm("Are you sure you want to reschedule this Studyhall for " + eventDate + " at " + eventTime + " ?")) {
      calId = event.url.match(/\?\d+/i)[0].substr(1);
      eventMonthInt = newEvent.getMonth() + 1;
      alert(eventMonthInt + 'month');
      if(eventMonthInt < 10){ eventMonth = '0' + eventMonthInt; }else{ eventMonth = eventMonthInt + ''; }
      eventDayInt = newEvent.getDay();
      alert(eventDayInt + 'day');
      if(eventDayInt < 10){ eventDay = '0' + eventDayInt; }else{ eventDay = eventDayInt + ''; }
      eventYear = newEvent.getYear() + 1900;
      newDate = eventMonth + '/' + eventDay + '/' + eventYear;
      $.ajax({
        url: ['calendars', calId].join('/'),
        type: 'PUT',
        data: "newDate=" + newDate + "&newTime=" + eventTime
      }).done(function( msg ) {
        alert( "Data Saved: " + msg );
      });
    }else{
      revertFunc();
    }

  },
  header: {
    left: 'title prev,next today',
    center: '',
    right: 'month,agendaWeek,agendaDay'
  },	
  events: <%= @user_cals %>,
	
});
	
});
</script>
